\NeedsTeXFormat{LaTeX2e}
\documentclass[12pt, a4paper]{book}

\usepackage[utf8]{inputenc}
\setlength{\emergencystretch}{1em}
\usepackage[dvipsnames]{xcolor} 
\definecolor{halfgray}{gray}{0.55} % chapter numbers will be semi transparent .5 .55 .6 .0
\usepackage{xspace}
\usepackage{mparhack}
\let\oldmarginpar\marginpar
\renewcommand{\marginpar}[1]{\oldmarginpar%
 [\raggedleft\hspace{0pt}{#1}]%
 {\raggedright\hspace{0pt}{#1}}}

\usepackage{textcase} 
\usepackage{soul} % for letterspacing 
                \sodef\allcapsspacing{\upshape}{0.15em}{0.65em}{0.6em}%
                \sodef\lowsmallcapsspacing{\scshape}{0.075em}{0.5em}{0.6em}%   
                \DeclareRobustCommand{\spacedallcaps}[1]{\MakeTextUppercase{\allcapsspacing{#1}}}%   
                \DeclareRobustCommand{\spacedlowsmallcaps}[1]{\MakeTextLowercase{\textsc{\lowsmallcapsspacing{#1}}}}%\protect
                
 \DeclareRobustCommand{\spacedallcaps}[1]{\MakeTextUppercase{\allcapsspacing{#1}}}
 
% \newfont{\chapterNumber}{eurb10 scaled 7000}
\newfont{\chapterNumber}{pplr9d scaled 7000}
 
\usepackage{titlesec}
% something like Bringhurst  
    \titleformat{\chapter}[display]%
        {\relax} % format
{\mbox{}\oldmarginpar{\vspace*{-3\baselineskip}\color{halfgray}\chapterNumber\thechapter}} % label
{0pt} % sep
{\raggedright\spacedallcaps} % before-code
[\normalsize\vspace*{.8\baselineskip}\titlerule] % after-code 
    
    % sections \FloatBarrier
    \titleformat{\section}
        {\relax}{\textsc{\MakeTextLowercase{\thesection}}}{1em}{\spacedlowsmallcaps}
    % subsections
    \titleformat{\subsection}
        {\relax}{\textsc{\MakeTextLowercase{\thesubsection}}}{1em}{\normalsize\itshape}
    % subsubsections
    \titleformat{\subsubsection}
        {\relax}{\textsc{\MakeTextLowercase{\thesubsubsection}}}{1em}{\normalsize\itshape}
        
\usepackage[titles]{tocloft}

\renewcommand{\cftdot}{} %empty {} for no dots. you can have any symbol inside.

% chapters
        	\renewcommand{\cftchappresnum}{\scshape\MakeTextLowercase}%
            \renewcommand{\cftchapfont}{\scshape}%
            \renewcommand{\cftchappagefont}{\normalfont}%
            
            \renewcommand{\cftsecpresnum}{\scshape\MakeTextLowercase}%
    	\renewcommand{\cftsecfont}{\normalfont}%
      \renewcommand{\cftsecpagefont}{\normalfont}%
      
%      \renewcommand{\cftchapleader}{\hspace{1.5em}}% 
%            	\renewcommand{\cftchapafterpnum}{\cftparfillskip}% 
%            	\renewcommand{\cftsecleader}{\hspace{1.5em}}% 
%      	\renewcommand{\cftsecafterpnum}{\cftparfillskip}%
%      	\renewcommand{\cftsubsecleader}{\hspace{1.5em}}% 
%      	\renewcommand{\cftsubsecafterpnum}{\cftparfillskip}

	\usepackage[automark]{scrpage2} % provides headers and footers (KOMA Script)
    \clearscrheadings
    \setheadsepline{0pt}
    \renewcommand{\chaptermark}[1]{\markboth{\spacedlowsmallcaps{#1}}{\spacedlowsmallcaps{#1}}}
    \renewcommand{\sectionmark}[1]{\markright{\thesection\enspace\spacedlowsmallcaps{#1}}} 
    \lehead{\mbox{\llap{\small\thepage\kern2em}\headmark\hfil}}
    \rohead{\mbox{\hfil{\headmark}\rlap{\small\kern2em\thepage}}}
    \renewcommand{\headfont}{\small}  



\usepackage[osf, sc]{mathpazo}
\linespread{1.05}
\usepackage{blindtext}
\usepackage{tikz}
\usetikzlibrary{shapes, arrows,calc,patterns,decorations.pathmorphing, decorations.markings}
\usepackage{tikz-3dplot}
\usepackage{tikzscale}
\usepackage{epsfig}
\usepackage{epstopdf}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{keyval}
\usepackage{float}
\usepackage{listings}
\usepackage{color}
\usepackage{textcomp}
\usepackage{datetime}
\usepackage[numbers, sort&compress, comma]{natbib}
\usepackage{subeqnarray}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage{bm}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{units}
\usepackage{pgfplots}
\usetikzlibrary{external}
\tikzexternalize[prefix=Tikz/]
\tikzsetexternalprefix{Figures/}
\pgfplotsset{    tick label style={font=\scriptsize},    label style={font=\small},
	title style={font=\normalsize\normalfont},    legend style={font=\scriptsize}}
% \tikzset{external/force remake} % Remake all tikz pictures.
\usepackage{listings}

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{myviolette}{rgb}{160,32,240}

\usepackage [linktocpage=all]{hyperref}
\hypersetup{
  pdftitle    = {Titel},
  pdfsubject  = {Electrical Engineering},
  pdfauthor   = {Robin Wei√ü},
  pdfkeywords = {Bachelor Thesis} ,
  pdfcreator  = {pdflatex},
  pdfproducer = {LaTeX}
}

\usepackage[acronym, nopostdot, nonumberlist, ucmark=true]{glossaries}\newglossary[nlg]{notation}{not}{ntn}{Notation}

\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{2}

\clubpenalty = 10000
\widowpenalty = 10000 
\displaywidowpenalty = 10000

\newcommand{\clearemptydoublepage}
{\newpage{\pagestyle{empty}\cleardoublepage}}

\makeglossaries
\setlength{\glsdescwidth}{0.8\linewidth}

\input{Acronyms}
\input{Notation}

% Add all glossary entries not only the referenced ones.
\glsaddall
    

\begin{document}

	\frontmatter
	
	\pagestyle{scrheadings}

	\include{Cover}
	\clearemptydoublepage
	
	\setcounter{page}{1}	
	\phantomsection
	\addcontentsline{toc}{chapter}{Statement of Authorship}
	\include{Statement}
	\clearemptydoublepage
	
	\include{Preface}
	\clearemptydoublepage

	\include{Abstract}
	\clearemptydoublepage
	
	\phantomsection
	\addcontentsline{toc}{chapter}{Contents}
	\tableofcontents
	\clearemptydoublepage
		
	\listoffigures
	\addcontentsline{toc}{chapter}{List of Figures}
	\clearemptydoublepage

%	\listoftables
%	\addcontentsline{toc}{chapter}{List of Tables}
%	\clearemptydoublepage	
	
	\printglossary[type=acronym, title={Abbreviations}, style=super]
	\addcontentsline{toc}{chapter}{Abbreviations}
	\clearemptydoublepage
    
    \printglossary[type=notation, style=super]
    \addcontentsline{toc}{chapter}{Notation}
    \clearemptydoublepage
	
	\mainmatter
		
	\include{Introduction}
	\include{Orientation_estimation}
	\include{Digital_filters}
	\include{Implementation}
	\include{Conclusion}
	
	\clearemptydoublepage
	\phantomsection
	\bibliographystyle{unsrtnat}
	\addcontentsline{toc}{chapter}{Bibliography}
	\bibliography{Bibliography}
	\clearemptydoublepage
	
	\appendix
	\clearpage
	\markboth{\MakeUppercase{Appendix}}{\MakeUppercase{Appendix}}
	\phantomsection
	\addcontentsline{toc}{chapter}{Appendix}
	\include{Appendix}
	\clearemptydoublepage
	
\end{document}
