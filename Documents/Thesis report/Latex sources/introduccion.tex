\chapter{Introducci\'on}
\label{ch:introduccion}





\section{Contexto}
 Actualmente, las enfermedades neurodegenerativas son una de las causas de muerte más importantes de los países desarrollados.  El incremento de la esperanza de vida y el envejecimiento de la población constituyen un factor deteminante que implica que cada vez existan más casos de enfermedades de este tipo.
 
 
 
 
 En el últimos años el grupo de investigación SiPBA (TIC 218) del Departamento de Teoría de la Señal, Telemática y Comunicaciones, adscrito al CITIC-UGR, ha venido aplicando los métodos desarrollados en el pasado, en la detección y diagnóstico de Alzheimer, en la iniciativa PPMI de la Fundación Michael J. Fox para el estudio de la enfermedad de Parkinson. Además se han empleado otras bases de datos como las de los hospitales Virgen de la Victoria de Málaga y Virgen de las Nieves de Granada, con los que el grupo mantiene una estrecha colaboración.

 
 Por otro lado, a finales del año 2013 de la mano de D. Alberto Olivares (integrante del grupo de investigación SipBA) se trabajó en colaboración con médicos para desarrollar una caja de herramientas Matlab que fuese completa .  El sistema determina la  
 posición humana utilizando los datos inerciales y se está utilizando actualmente en el Laboratorio de Análisis de Movimiento del Servicio de Neurología (Klinikum Großhadern) para obtener informes objetivos de la marcha y el movimiento de los pacientes de Parkinson. Mi proyecto supone el desarrollo de una aplicación para que permita visualizar los datos y se pueda configurar dicho sistema.

 
 El trabajo se engloba dentro del proyecto de análisis del movimiento del cuerpo
 humano, llevado a cabo entre los departamentos de ATC (Arquitectura y Tecnología de los
 Computadores) y TSTC (Teoría de la Señal, Telemática y Comunicaciones), de la Universidad
 de Granada.
 
 
 Para ser más concretos, el proyecto se incluiría en la capa de \textit{aplicaciones} puesto que consiste en el desarrollo de una aplicación de visualización de datos y configuración  para sistemas de monitorización y análisis del movimiento del cuerpo humano.

\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{figuras/Introduccion/intro1}
\caption{Estructura del proyecto del movimiento de la UGR}
\label{fig:intro1}
\end{figure}


\section{Motivaci\'on}



Como ya habíamos hablado anteriormente, a la hora de desarrollar nuestra aplicación partíamos de un sistema capaz de determinar la posición humana utilizando los datos inerciales. Pero si queremos un resultado óptimo, los datos iniciales se procesan y experimentan  una serie de transformaciones. Aquí es cuando entran en juego los algoritmos de monitorización de la marcha. 


 En los estudios aplicados en su tesis \cite{funda5} por el Dr. Alberto Olivares Vicente se aplica un anális de forma detallada de los algoritmos de calibración existentes en la actualidad y se observa que existen dos grandes grupos de métodos, aquellos basados en la minimización del error o coste para estimar los parámetros de calibración, y aquellos que calculan los parámetros de forma directa aplicando una serie de trasformaciones algebraicas.
 
  
 
 En cuanto a los métodos de estimación de la orientación comenzaron a ser desarrollados  en los años setenta para las misiones espaciales. Se desarrollaron una serie de algoritmos con el objeto de determinar la orientación de la nave u objeto espacial respecto a distintos sistemas de referencia. Los métodos TRIAD Y QUEST (por citar algunos), pueden ser considerados ejemplos de estos primeros algoritmos para la estimación de la orientación.
 

 Hoy en día y sirviéndonos del  análisis de los algoritmos de estimación de la orientación efectuado en \cite{funda5}, se llega a la conclusión de que practicamente el 100 \% de los algoritmos existentes estarían basados en la fusión de varios sensores utilizando el filtro de Kalman.



 
Ahora que ya podemos decir que estamos mejor situados, cabe destacar que la motivación principal de nuestro proyecto  surge de la idea de integrar en una aplicación visual los distintos algoritmos de monitorización desarrollados hasta la  fecha para el sistema sobre el que partíamos inicialmente.




\section{Objetivos}

 
El \textbf{objetivo principal} del proyecto es desarrollar una aplicación gráfica en Matlab que permita la configuración y visualización de los datos recogidos por los sistemas de medida de parámetros de la marcha GaitWatch Manager y ECnsole. Los sistemas están compuestos por una serie de módulos que contienen sensores magnéticos e inerciales del tipo MEMS que son colocados en diferentes segmentos corporales. Este sistema permite la monitorización del movimiento del cuerpo humano y está orientado al cálculo de parámetros de la marcha (longitud de zancada, cadencia, etc.). Además, este sistema está siendo utilizado en la actualidad en la unidad de análisis del movimiento dentro del Departamento de Neurología del Hospital Clínico Großhadern de Múnich.


A continuación procedemos a detallar el objetivo principal de una forma más específica:








\begin{itemize}
\item \textbf{Análisis de los sistemas de monitorización de la marcha.} Si querememos cubrir los objetivos globales que se imponen inicialmente, debemos hacer un estudio general de las características del hardware utilizado. A partir de las conclusiones extraidas, aplicamos un análisis de los requisitos que debe cumplir la aplicación.


\item \textbf{Desarrollo del software.}
Una vez finalizada la etapa anterior construimos la interfaz gráfica teniendo en cuenta los requerimientos fijados. Es la fase más larga y de mayor esfuerzo.

\item \textbf{Integración de algoritmos.}

En esta fase se incluyen los algoritmos ya desarrollados para la monitorización de la marcha en la aplicación. La ejecución debe resultar imperceptible para el usuario mientras hace uso del programa.

\begin{itemize}
\item \textbf{Algoritmos de calibración.} El usario tendrá la posibilidad de cargar los parámetros de calibración calculados anteriormente.

\item \textbf{Algoritmos de orientación.} El usuario podrá modificar los parámetros de los algoritmos en función de los requerimientos del movimiento que ha sido monitorizado.
\end{itemize}




\end{itemize}




Además del objetivo principal, el proyecto intentará cumplir otra serie de objetivos:

\begin{itemize}
\item \textbf{Revisión del estado del arte}: Esta parte consiste en hacer un recorrido por todos aquellos desarrollos de última tecnología relacionados con nuestro dispositivo, que han sido probados en la industria y han sido acogidos y aceptados por diferentes fabricantes.


\item \textbf{Estudio teórico de la materia}. Este objetivo tiene como finalidad comprender todos los conceptos teóricos relacionados con los sistemas de monitorización de la marcha.

\end{itemize}















\section{Estructura del documento}



Este proyecto comienza con el Capítulo \ref{ch:introduccion}, el cual es una introducción, y cuyo fin por un lado es poner el contexto en que se enmarca el proyecto  y por otro lado guiar al lector en la motivación y objetivos de la presente obra.


 El Capítulo \ref{ch:monitorizacion} está estructurado en dos bloques principalmente, el  primero  define el concepto de \textit{análisis de la marcha} y  hace un repaso breve de su historia. Posteriormente se describen todos los factores y parámetros que se necesitan tener en cuenta para el análisis de la marcha. Después, se ven las aplicaciones que podemos encontrar de los sistemas de captura del movimiento  humano (es necesario aclarar que este tipo de sistemas engloban a los sitemas orientados al análisis de la marcha). Finalmente, se establece una clasificación de los sistemas de captura del movimiento humano. Una vez que pasamos al segundo bloque, se pretende establecer una visión general de dispositivos disponibles en el mercado con características similares, los cuales han servido de referencia y motivación. Para ello se hace una revisión del estado del arte.



En el Capítulo \ref{ch:fundamentos} se realizará un extenso análisis a nivel teórico de los fundamentos de los sensores inerciales (acelerómetro, giróscopo y  magnetómetro) utilizados en los sitemas GaitWatch Manager y ECnsole. La segunda parte del capítulo se centrará primero en  explicar el proceso de calibración, cuyo objetivo es transformar los datos originales en unidades con sentido físico. Después se describirán los algoritmos para el cálculo de la orientación. Primero el método de \textit{Integración de la Velocidad Angular} para el giróscopo. Posteriormente, el método de \textit{Descomposición de la Gravedad} donde el acelerómetro y el magnetómetro trabajan de manera conjunta. Después, el  \textit{Filtro de Kalman} que  fusiona  los datos   del acelerómetro, giróscopo y manetómetro obteniendo unos resultados más precisos. Y por último, el \textit{Filtro de Kalman Extendido} (una mejora del \textit{Filtro de Kalman} gracias al uso de un elemento nuevo, los cuaterniones, que minimizan el cálculo computacional). 


En el Capítulo \ref{ch:Hardware} se realiza una descripción general de los sistemas GaitWatch Manager y ECnsole. Además, se especifican las características técnicas de cada uno de los dispostivos. En el caso del GaitWatch, se le añade adicionalmente una explicación exhaustiva de como se identifican los ejes de los sensores inerciales que contiene.

El Capítulo \ref{ch:software} comienza con una introducción teórica acerca de Matlab GUI para que el lector se pueda familiarizar con la creación de interfaces gráficas a través de Matlab. Inicialmente se ofrece la posibilidad de uso del entorno de desarrollo GUIDE para el diseño de aplicaciones relativamente sencillas, GUIDE es  una herramienta que permite facilitar el diseño de mismas. Posteriormente se dan las pautas a seguir si decidimos prescindir de dicha herramienta (tal y como se hecho en el proyecto), es decir, se opta por la creación de las GUIs de forma programática. Una vez finalizado este bloque, se continúa con la despcripción de la aplicación (la interfaz gráfica desarrollada que constituye el proyecto). Aquí se van metiendo en distintas secciones cada una de las partes de la aplicación con sus capturas y explicaciones correspondientes. 


Para terminar, en el Capítulo \ref{ch:conclusiones} se extraen las conclusiones finales del proyecto y se
incorpora una visión sobre posibles mejoras y líneas futuras de trabajo.
